(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();const f="[data-js-theme-change]",u=document.body;class p{selectors={root:f,button:"[data-js-theme-button]",toggle:"[data-js-theme-button-toggle]"};stateClasses={isActive:"is-active",light:"light"};icons={moon:`<?xml version="1.0" encoding="iso-8859-1"?>
<!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<svg height="800px" width="800px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	 viewBox="0 0 512 512" xml:space="preserve">
<circle style="fill:#E5E5E5;" cx="256" cy="256" r="244.87"/>
<g>
	<circle style="fill:#AFAFAF;" cx="77.913" cy="256" r="22.261"/>
	<circle style="fill:#AFAFAF;" cx="144.696" cy="367.304" r="44.522"/>
	<circle style="fill:#AFAFAF;" cx="367.304" cy="211.478" r="66.783"/>
</g>
<path d="M437.02,74.98C388.667,26.628,324.381,0,256,0S123.333,26.628,74.98,74.98C26.628,123.333,0,187.62,0,256
	s26.628,132.667,74.98,181.02C123.333,485.372,187.619,512,256,512s132.667-26.628,181.02-74.98C485.372,388.667,512,324.38,512,256
	S485.372,123.333,437.02,74.98z M256,489.739C127.116,489.739,22.261,384.884,22.261,256S127.116,22.261,256,22.261
	S489.739,127.116,489.739,256S384.884,489.739,256,489.739z"/>
<path d="M256,44.522c-48.272,0-95.484,16.691-132.939,46.999c-4.779,3.867-5.518,10.876-1.651,15.654
	c2.199,2.718,5.415,4.129,8.658,4.129c2.459,0,4.935-0.811,6.994-2.479C170.571,81.714,212.808,66.783,256,66.783
	c6.146,0,11.13-4.983,11.13-11.13S262.146,44.522,256,44.522z"/>
<path d="M99.286,130.753c2.119,1.881,4.756,2.805,7.384,2.805c3.072,0,6.131-1.264,8.329-3.743l0.158-0.176
	c4.115-4.567,3.749-11.605-0.818-15.72c-4.566-4.115-11.606-3.749-15.718,0.818l-0.27,0.302
	C94.268,119.638,94.688,126.672,99.286,130.753z"/>
<path d="M111.304,256c0-18.412-14.979-33.391-33.391-33.391S44.522,237.588,44.522,256s14.979,33.391,33.391,33.391
	S111.304,274.412,111.304,256z M77.913,267.13c-6.137,0-11.13-4.993-11.13-11.13c0-6.137,4.993-11.13,11.13-11.13
	s11.13,4.993,11.13,11.13C89.043,262.137,84.05,267.13,77.913,267.13z"/>
<path d="M144.696,311.652c-30.687,0-55.652,24.966-55.652,55.652s24.966,55.652,55.652,55.652s55.652-24.966,55.652-55.652
	S175.382,311.652,144.696,311.652z M144.696,400.696c-18.412,0-33.391-14.979-33.391-33.391s14.979-33.391,33.391-33.391
	s33.391,14.979,33.391,33.391S163.108,400.696,144.696,400.696z"/>
<path d="M367.304,133.565c-42.961,0-77.913,34.952-77.913,77.913s34.952,77.913,77.913,77.913s77.913-34.952,77.913-77.913
	S410.266,133.565,367.304,133.565z M367.304,267.13c-30.687,0-55.652-24.966-55.652-55.652s24.966-55.652,55.652-55.652
	s55.652,24.966,55.652,55.652S397.991,267.13,367.304,267.13z"/>
</svg>`,sun:`<?xml version="1.0" encoding="iso-8859-1"?>
<!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<svg height="800px" width="800px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	 viewBox="0 0 512 512" xml:space="preserve">
<circle style="fill:#FFFE9F;" cx="256" cy="256" r="133.565"/>
<path d="M256,111.304c-79.785,0-144.696,64.91-144.696,144.696S176.215,400.696,256,400.696S400.696,335.785,400.696,256
	S335.785,111.304,256,111.304z M256,378.435c-67.511,0-122.435-54.924-122.435-122.435S188.489,133.565,256,133.565
	S378.435,188.489,378.435,256S323.511,378.435,256,378.435z"/>
<path d="M256,155.826c-30.337,0-58.709,13.527-77.837,37.112c-3.872,4.774-3.141,11.784,1.633,15.656
	c2.062,1.673,4.541,2.487,7.004,2.487c3.239,0,6.451-1.407,8.651-4.119c14.885-18.351,36.953-28.875,60.55-28.875
	c6.147,0,11.13-4.983,11.13-11.13S262.147,155.826,256,155.826z"/>
<path d="M172.533,222.851c-5.946-1.514-12.003,2.104-13.532,8.045c-0.006,0.02-0.028,0.108-0.033,0.129
	c-1.496,5.949,2.113,11.954,8.058,13.467c0.916,0.233,1.833,0.344,2.737,0.344c4.965,0,9.502-3.363,10.795-8.389
	c0.006-0.02,0.028-0.108,0.033-0.129C182.087,230.368,178.479,224.364,172.533,222.851z"/>
<path d="M256,89.043c6.147,0,11.13-4.983,11.13-11.13V11.13C267.13,4.983,262.147,0,256,0s-11.13,4.983-11.13,11.13v66.783
	C244.87,84.06,249.853,89.043,256,89.043z"/>
<path d="M256,422.957c-6.147,0-11.13,4.983-11.13,11.13v66.783c0,6.147,4.983,11.13,11.13,11.13s11.13-4.983,11.13-11.13v-66.783
	C267.13,427.94,262.147,422.957,256,422.957z"/>
<path d="M122.203,137.944c2.174,2.174,5.022,3.26,7.87,3.26c2.848,0,5.698-1.086,7.87-3.26c4.346-4.346,4.346-11.394,0-15.741
	L90.722,74.98c-4.346-4.346-11.394-4.346-15.742,0c-4.346,4.346-4.346,11.394,0,15.741L122.203,137.944z"/>
<path d="M389.797,374.056c-4.346-4.346-11.394-4.346-15.742,0c-4.346,4.346-4.346,11.394,0,15.741l47.222,47.222
	c2.174,2.174,5.022,3.26,7.87,3.26c2.848,0,5.698-1.086,7.87-3.26c4.346-4.346,4.346-11.394,0-15.741L389.797,374.056z"/>
<path d="M89.043,256c0-6.147-4.983-11.13-11.13-11.13H11.13C4.983,244.87,0,249.853,0,256s4.983,11.13,11.13,11.13h66.783
	C84.06,267.13,89.043,262.147,89.043,256z"/>
<path d="M500.87,244.87h-66.783c-6.147,0-11.13,4.983-11.13,11.13s4.983,11.13,11.13,11.13h66.783c6.147,0,11.13-4.983,11.13-11.13
	S507.017,244.87,500.87,244.87z"/>
<path d="M122.203,374.056l-47.222,47.222c-4.346,4.346-4.346,11.394,0,15.741c2.174,2.174,5.022,3.26,7.87,3.26
	s5.698-1.086,7.87-3.26l47.222-47.222c4.346-4.346,4.346-11.394,0-15.741C133.597,369.71,126.55,369.71,122.203,374.056z"/>
<path d="M381.926,141.204c2.848,0,5.698-1.086,7.87-3.26l47.222-47.222c4.346-4.346,4.346-11.394,0-15.741
	c-4.346-4.346-11.394-4.346-15.742,0l-47.222,47.222c-4.346,4.346-4.346,11.394,0,15.741
	C376.23,140.117,379.078,141.204,381.926,141.204z"/>
</svg>`};constructor(t){this.rootElement=t,this.buttonElement=this.rootElement.querySelector(this.selectors.button),this.toggleElement=this.rootElement.querySelector(this.selectors.toggle),this.loadTheme(),this.updateIcon(),this.bindEvent()}onButtonClick(){const t=u.classList.contains(this.stateClasses.light);u.classList.toggle(this.stateClasses.light),this.toggleElement.classList.toggle(this.stateClasses.isActive),localStorage.setItem("theme",t?"dark":"light"),this.updateIcon()}updateIcon(){const t=u.classList.contains(this.stateClasses.light);this.toggleElement.innerHTML=t?this.icons.sun:this.icons.moon}loadTheme(){try{const t=localStorage.getItem("theme");if(t===null){const o=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";localStorage.setItem("theme",o),o==="light"&&(u.classList.add(this.stateClasses.light),this.toggleElement.classList.add(this.stateClasses.isActive))}else t==="light"&&(u.classList.add(this.stateClasses.light),this.toggleElement.classList.add(this.stateClasses.isActive))}catch(t){console.log("Load Theme error:",t)}}bindEvent(){this.buttonElement.addEventListener("click",()=>this.onButtonClick())}}class b{constructor(){this.init()}init(){document.querySelectorAll(f).forEach(t=>{new p(t)})}}const v="[data-js-game-board]";class E{selectors={root:v,gameCellSelector:"[data-js-cell]",gameOverlaySelector:"[data-js-game-overlay]",gameOverlayTitleSelector:"[data-js-game-overlay-title]",newGameButtonSelector:"[data-js-new-game]",gameStatusSelector:"[data-js-game-status]",gameScoreSelector:"[data-js-game-score]"};constructor(t,e){this.rootElement=t,this.gameCellElements=this.rootElement.querySelectorAll(this.selectors.gameCellSelector),this.gameOverlayElement=document.querySelector(this.selectors.gameOverlaySelector),this.gameOverlayTitleElement=document.querySelector(this.selectors.gameOverlayTitleSelector),this.newGameButtonElement=document.querySelector(this.selectors.newGameButtonSelector),this.gameStatusElement=document.querySelector(this.selectors.gameStatusSelector),this.gameScoreElement=document.querySelector(this.selectors.gameScoreSelector),this.settings=e,this.board=Array(this.settings.boardSize).fill(null).map(()=>Array(this.settings.boardSize).fill(null)),this.currentPlayer=e.playerSymbol,this.aiDifficulty=e.aiDifficulty,this.gameActive=!1,this.winner=null,this.winningPattern=null,this.winLength=this.getWinLength(this.settings.boardSize),this.winPatterns=this.generateWinPatterns(this.settings.boardSize,this.winLength);const o=this.loadScoreFromStorage();this.userWins=o.userWins,this.botWins=o.botWins,this.init()}getWinLength(t){return t===3?3:4}loadScoreFromStorage(){try{const t=localStorage.getItem("ticTacToeScore");if(t){const e=JSON.parse(t);return{userWins:e.userWins||0,botWins:e.botWins||0}}}catch{}return{userWins:0,botWins:0}}saveScoreToStorage(){try{const t={userWins:this.userWins,botWins:this.botWins};localStorage.setItem("ticTacToeScore",JSON.stringify(t))}catch(t){console.error(t)}}init(){this.bindEvents(),this.updateScoreDisplay(),this.checkForBotFirstMove()}checkForBotFirstMove(){this.settings.playerSymbol==="X"&&(this.gameActive=!0,this.makeAiMove())}generateWinPatterns(t,e){const o=[];for(let s=0;s<t;s++)for(let i=0;i<=t-e;i++){const n=[];for(let l=0;l<e;l++)n.push([s,i+l]);o.push(n)}for(let s=0;s<t;s++)for(let i=0;i<=t-e;i++){const n=[];for(let l=0;l<e;l++)n.push([i+l,s]);o.push(n)}for(let s=0;s<=t-e;s++)for(let i=0;i<=t-e;i++){const n=[];for(let l=0;l<e;l++)n.push([s+l,i+l]);o.push(n)}for(let s=0;s<=t-e;s++)for(let i=e-1;i<t;i++){const n=[];for(let l=0;l<e;l++)n.push([s+l,i-l]);o.push(n)}return o}checkWin(t){for(const e of this.winPatterns)if(e.every(([s,i])=>this.board[s][i]===t))return this.winningPattern=e,!0;return!1}checkDraw(){for(let t=0;t<this.board.length;t++)for(let e=0;e<this.board[t].length;e++)if(this.board[t][e]===null)return!1;return!0}onCellClick(t){this.gameActive||(this.gameActive=!0);const e=t.currentTarget,o=+e.dataset.index;if(e.dataset.value||!this.gameActive)return;const s=this.settings.playerSymbol;this.makeMove(o,s),this.gameActive&&this.makeAiMove()}makeMove(t,e){const o=Math.floor(t/this.settings.boardSize),s=t%this.settings.boardSize;this.board[o][s]=e,this.updateCellUI(t,e),this.checkGameEnd(e),(this.gameActive||!this.winner)&&this.updateGameStatus(e)}updateCellUI(t,e){const o=this.gameCellElements[t];o.textContent=e,o.dataset.value=e}updateGameStatus(t){if(!this.gameStatusElement)return;const e=t==="X"?"O":"X";this.gameStatusElement.textContent=`Player ${e}'s turn`}updateScoreDisplay(){this.gameScoreElement&&(this.gameScoreElement.textContent=`User: ${this.userWins} | Bot: ${this.botWins}`)}checkGameEnd(t){if(this.checkWin(t)){this.gameActive=!1,this.winner=t;const e=this.settings.playerSymbol==="X"?"O":"X";t===this.settings.playerSymbol?this.userWins++:t===e&&this.botWins++,this.saveScoreToStorage(),this.updateScoreDisplay(),this.highlightWinningCells(),this.showGameOverModal(`Player ${t} wins!`);return}this.checkDraw()&&(this.gameActive=!1,this.showGameOverModal("Draw!"))}highlightWinningCells(){if(this.winningPattern)for(const[t,e]of this.winningPattern){const o=t*this.settings.boardSize+e,s=this.gameCellElements[o];s&&s.classList.add("game__cell--winner")}}clearWinningHighlight(){this.gameCellElements.forEach(t=>{t.classList.remove("game__cell--winner")}),this.winningPattern=null}showGameOverModal(t){this.gameOverlayTitleElement.textContent=t,this.gameOverlayElement.removeAttribute("hidden")}hideGameOverModal(){this.gameOverlayElement.setAttribute("hidden","")}resetGame(){if(this.board=Array(this.settings.boardSize).fill(null).map(()=>Array(this.settings.boardSize).fill(null)),this.gameActive=!1,this.winner=null,this.clearWinningHighlight(),this.gameCellElements.forEach(t=>{t.textContent="",t.removeAttribute("data-value")}),this.hideGameOverModal(),this.gameStatusElement){const t=this.settings.playerSymbol==="X"?"O":this.settings.playerSymbol;this.gameStatusElement.textContent=`Player ${t}'s turn`}this.checkForBotFirstMove()}makeAiMove(){this.checkAiDifficulty()}checkAiDifficulty(){switch(this.settings.aiDifficulty){case"easy":return this.easyAi();case"medium":return this.mediumAi();case"hard":return this.hardAi();default:return this.mediumAi()}}getEmptyCells(){const t=[];for(let e=0;e<this.board.length;e++)for(let o=0;o<this.board[e].length;o++)if(this.board[e][o]===null){const s=e*this.settings.boardSize+o;t.push(s)}return t}getRandomEmptyCell(){const t=this.getEmptyCells();if(t.length>0){const e=Math.floor(Math.random()*t.length);return t[e]}return null}findWinningMove(t){for(const e of this.winPatterns){let o=null,s=0,i=0;for(const[n,l]of e)this.board[n][l]===t?s++:this.board[n][l]===null&&(o=[n,l],i++);if(s===this.winLength-1&&i===1){const[n,l]=o;return n*this.settings.boardSize+l}}return null}easyAi(){const t=this.settings.playerSymbol==="X"?"O":"X",e=this.getRandomEmptyCell();e!==null&&this.makeMove(e,t)}mediumAi(){const t=this.settings.playerSymbol==="X"?"O":"X",e=this.settings.playerSymbol,o=this.findWinningMove(t);if(o!==null){this.makeMove(o,t);return}const s=this.findWinningMove(e);if(s!==null){this.makeMove(s,t);return}const i=this.getRandomEmptyCell();i!==null&&this.makeMove(i,t)}hardAi(){const t=this.settings.playerSymbol==="X"?"O":"X",e=this.settings.boardSize,o=this.getEmptyCells();if(e>=4&&o.length>=e*e-2){const i=Math.floor(e/2),n=i*e+i;if(this.board[i][i]===null){this.makeMove(n,t);return}const l=[[i-1,i],[i+1,i],[i,i-1],[i,i+1]];for(const[a,r]of l)if(a>=0&&a<e&&r>=0&&r<e&&this.board[a][r]===null){this.makeMove(a*e+r,t);return}}const s=this.findBestMove(t);s!==null&&this.makeMove(s,t)}findBestMove(t){let e=-1/0,o=null,s=-1/0,i=1/0;const n=this.getEmptyCells();for(const l of n){const a=Math.floor(l/this.settings.boardSize),r=l%this.settings.boardSize;this.board[a][r]=t;const c=this.minimax(0,!1,t,s,i);this.board[a][r]=null,c>e&&(e=c,o=l),s=Math.max(s,e)}return o}minimax(t,e,o,s,i){const n=this.settings.playerSymbol;if(this.checkWin(o))return 10-t;if(this.checkWin(n))return t-10;if(this.checkDraw())return 0;const l=this.getEmptyCells(),a=this.settings.boardSize>3?4:1/0;if(t>=a)return 0;if(e){let r=-1/0;for(const c of l){const m=Math.floor(c/this.settings.boardSize),d=c%this.settings.boardSize;this.board[m][d]=o;const g=this.minimax(t+1,!1,o,s,i);if(this.board[m][d]=null,r=Math.max(g,r),s=Math.max(s,r),i<=s)break}return r}else{let r=1/0;for(const c of l){const m=Math.floor(c/this.settings.boardSize),d=c%this.settings.boardSize;this.board[m][d]=n;const g=this.minimax(t+1,!0,o,s,i);if(this.board[m][d]=null,r=Math.min(g,r),i=Math.min(i,r),i<=s)break}return r}}updateSettings(t){this.settings=t,this.board=Array(t.boardSize).fill(null).map(()=>Array(t.boardSize).fill(null)),this.currentPlayer=t.playerSymbol,this.aiDifficulty=t.aiDifficulty,this.gameActive=!1,this.winLength=this.getWinLength(t.boardSize),this.winPatterns=this.generateWinPatterns(t.boardSize,this.winLength),this.resetGame()}bindEvents(){this.gameCellElements.forEach(t=>t.addEventListener("click",e=>this.onCellClick(e))),this.newGameButtonElement.addEventListener("click",()=>this.resetGame())}}const S="[data-js-settings]";class C{selectors={root:S,boardSizeSelector:"[data-js-board-size]",aiDifficulty:"[data-js-ai-difficulty]",playerSymbolSelector:"[data-js-player-symbol]",gameBoardSelector:"[data-js-game-board]"};stateClasses={isActive:"game__button--active"};constructor(t){this.rootElement=t,this.boardSizeElements=this.rootElement.querySelectorAll(this.selectors.boardSizeSelector),this.aiDifficultyElement=this.rootElement.querySelector(this.selectors.aiDifficulty),this.playerSymbolElements=this.rootElement.querySelectorAll(this.selectors.playerSymbolSelector),this.gameBoardElement=document.querySelector(this.selectors.gameBoardSelector),this.settings={boardSize:this.getBoardSize(),playerSymbol:this.getPlayerSymbol(),aiDifficulty:this.getAiDifficulty()},this.gameLogic=null,this.initGame(),this.bindEvent()}getBoardSize(){const t=Array.from(this.boardSizeElements).find(e=>e.classList.contains(this.stateClasses.isActive));return t?+t.dataset.jsBoardSize:3}getPlayerSymbol(){const t=Array.from(this.playerSymbolElements).find(e=>e.classList.contains(this.stateClasses.isActive));return t?t.dataset.jsPlayerSymbol:"O"}getAiDifficulty(){return this.aiDifficultyElement.value}updateSettings(){const t=this.getBoardSize(),e=this.getPlayerSymbol(),o=this.getAiDifficulty();this.settings={boardSize:t,playerSymbol:e,aiDifficulty:o},this.gameLogic.updateSettings(this.settings)}recreateBoard(t){this.gameBoardElement.innerHTML="",this.gameBoardElement.dataset.boardSize=t;const e=+t;for(let o=0;o<Math.pow(e,2);o++){const s=document.createElement("button");s.classList.add("game__cell"),s.dataset.jsCell="",s.dataset.index=`${o}`,s.type="button",this.gameBoardElement.appendChild(s)}this.initGame()}onBoardSizeButtonClick(t){const e=t.currentTarget,o=e.dataset.jsBoardSize;this.boardSizeElements.forEach(s=>s.classList.remove(this.stateClasses.isActive)),e.classList.add(this.stateClasses.isActive),this.recreateBoard(o),this.updateSettings()}onPlayerSymbolButtonClick(t){const e=t.currentTarget;this.playerSymbolElements.forEach(o=>o.classList.remove(this.stateClasses.isActive)),e.classList.add(this.stateClasses.isActive),this.updateSettings()}initGame(){this.gameLogic=new E(this.gameBoardElement,this.settings)}bindEvent(){this.boardSizeElements.forEach(t=>t.addEventListener("click",e=>this.onBoardSizeButtonClick(e))),this.playerSymbolElements.forEach(t=>t.addEventListener("click",e=>this.onPlayerSymbolButtonClick(e))),this.aiDifficultyElement.addEventListener("change",()=>this.updateSettings())}}class w{constructor(){this.init()}init(){document.querySelectorAll(S).forEach(t=>{new C(t)})}}const y="[data-js-rules-modal]";class M{selectors={root:y,closeButtonSelector:"[data-js-rules-close]",openButtonSelector:"[data-js-rules-button]"};constructor(t){this.rootElement=t,this.closeButtonElement=document.querySelector(this.selectors.closeButtonSelector),this.openButtonElement=document.querySelector(this.selectors.openButtonSelector),this.bindEvent()}onOpenButtonClick(){this.rootElement.showModal()}onCloseButtonClick(){this.rootElement.close()}onBackdropClick(t){const e=this.rootElement.getBoundingClientRect();e.top<=t.clientY&&t.clientY<=e.top+e.height&&e.left<=t.clientX&&t.clientX<=e.left+e.width||this.rootElement.close()}bindEvent(){this.openButtonElement.addEventListener("click",()=>this.onOpenButtonClick()),this.closeButtonElement.addEventListener("click",()=>this.onCloseButtonClick()),this.rootElement.addEventListener("click",t=>this.onBackdropClick(t))}}class A{constructor(){this.init()}init(){document.querySelectorAll(y).forEach(t=>{new M(t)})}}new b;new w;new A;
